#!/usr/bin/env python3

import sublist3r 
#import dig
import sys
import os

dName = sys.argv[1]


#myfile = open(dName + 'ipaddr.txt', 'w')


#myCmd = ("dig -f %ssub.txt +short" % (dName))


with open(dName + 'sub.txt') as text_file, open(dName + 'ipaddr.txt', 'w') as myfile:
	for line in text_file:
#		if IPv4Address(line) > 0:
		def validate_ip(line):
		    a = s.split('.')
		    if len(a) != 4:
	        	return False
		    for x in a:
		        if not x.isdigit():
		            return False
		        i = int(x)
		        if i < 0 or i > 255:
		            return False
		    return True
		if validate_ip(line) = true:
			myfile.write(line)
			myCmd = ("dig %s +short >> %sipaddr.txt" % (line, dName))
			os.system(myCmd)


#myfile.writelines(ipadr)

myfile.close()
text_file.close()
